<p-table
  #dt
  [value]="data"
  [rows]="rows"
  [paginator]="paginator"
  [globalFilterFields]="['name']"
  [tableStyle]="{ 'min-width': '75rem' }"
  [selection]="selectedItems"
  (selectionChange)="onSelectionChange($event)"
  [rowHover]="true"
  dataKey="id"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} items"
  [showCurrentPageReport]="showCurrentPageReport"
  [rowsPerPageOptions]="rowsPerPageOptions"
>
  <ng-template #header>
    <tr *ngIf="showDefaultHeader">
      <th style="width: 3rem"><p-tableHeaderCheckbox /></th>
      <th style="width: 8rem">Actions</th>
      <th *ngFor="let field of displayFields" style="min-width: 12rem">
        {{ field.label }}
      </th>
    </tr>
  </ng-template>

  <ng-template #body let-item>
    <tr *ngIf="showDefaultBody">
      <td style="width: 3rem"><p-tableCheckbox [value]="item" /></td>
      <td style="width: 8rem">
        <div class="flex gap-2 items-center">
          <lib-button-actions-row1 [item]="item" (edit)="onEditItem($event)">
          </lib-button-actions-row1>
        </div>
      </td>
      <td *ngFor="let field of displayFields">
        <ng-container [ngSwitch]="field.type">
          <img
            *ngSwitchCase="'img'"
            [src]="getImageUrl(field, getValue(item, field))"
            [alt]="getImageAltText(field, item)"
            style="width: 64px"
            class="rounded"
          />

          <span *ngSwitchCase="'checkbox'" class="flex items-center gap-2">
            <i
              [class]="
                getValue(item, field)
                  ? 'pi pi-check-circle text-green-500'
                  : 'pi pi-times-circle text-red-500'
              "
            ></i>
            <span>{{ getValue(item, field) ? 'Yes' : 'No' }}</span>
          </span>

          <span *ngSwitchDefault>
            {{ formatDynamicFieldValue(field, getValue(item, field)) }}
          </span>
        </ng-container>
      </td>
    </tr>
  </ng-template>
</p-table>
